@model EP._6._2A_Assignment.Models.MenuItem
@using Microsoft.AspNetCore.Identity
@inject DataAccess.Context.ApplicationDbContext _context

@{
    var restaurant = _context.Restaurants.FirstOrDefault(r => r.Id == Model.RestaurantId);
    var isOwner = User.Identity.IsAuthenticated && restaurant != null && restaurant.ownerEmailAdress == User.Identity.Name;
}

<div class="list-group-item d-flex justify-content-between align-items-center">
    <div>
        <strong>@Model.Title</strong> — @Model.Price.ToString("F2") €
        <span class="badge @(Model.Status == "Approved" ? "bg-success" : "bg-secondary") ms-2">
            @Model.Status
        </span>
    </div>

    @if (isOwner && Model.Status == "Pending")
    {
        <form asp-controller="Catalog" asp-action="ApproveSelected" method="post" class="ms-3">
            <input type="hidden" name="selectedIds" value="@Model.Id" />
            <button type="submit" class="btn btn-outline-success btn-sm">Confirm Item</button>
        </form>
    }
</div>